<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>12.3 Proxy.revocable</title>
</head>
<body>
    <script>
    //12.3 Proxy.revocable()
    //Proxy.revocable方法返回一个可取消的Proxy实例
    let target={};
    let handler={};

    let {proxy,revoke}=Proxy.revocable(target,handler);
    proxy.foo=123;
    console.log(proxy.foo);     //123

    revoke();
    console.log(proxy.foo);     //TypeError:Revoked

    //Proxy.revocable方法返回一个对象,其proxy属性是Proxy实例,revoke属性是一个函数,可以取消Proxy实例.
    //上面的代码中,当执行revoke函数后在访问Proxy实例,就会抛出一个错误

    //Proxy.revocable的一个使用场景是,目标对象不允许直接访问,必须通过代理访问,一旦访问结束,就收回代理权,不允许再次访问

    </script>
</body>
</html>